<h1 class="page-header">Аккаунты</h1>
<div class="alert alert-danger" role="alert" *ngIf="errorMessage">{{errorMessage}}</div>

<div class="grid-view" *ngIf="!onDetailView">
<p>
    <button type="button" class="btn btn-primary" (click)="createItem()"><i class="fa fa-plus"></i> Добавить</button>
</p>
<table class="table table-hover table table-bordered m-grid" *ngIf="!onDetailView">
    <thead>
        <tr>
            <th *ngFor="let column of columns" [ngTableSorting]="config" [column]="column" (sortChanged)="onChangeTable($event)">
                {{column.title}}
                <i *ngIf="config && column.sort" class="pull-right fa" [ngClass]="{'fa-chevron-down': column.sort === 'desc', 'fa-chevron-up': column.sort === 'asc'}"></i>
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td *ngFor="let column of columns">
                <input *ngIf="column.filtering" [ngTableFiltering]="column.filtering" class="form-control" (tableChanged)="onChangeTable(config)" />
            </td>
            <td></td>
        </tr>
        <tr *ngFor="let item of items">
            <td *ngFor="let column of columns">{{item[column.name]}}</td>
            <td class="action-column">
                <a (click)="viewDetails(item)" title="Просмотр" aria-label="Просмотр"><span class="glyphicon glyphicon-eye-open"></span></a>
                <a (click)="updateItem(item)" title="Редактировать" aria-label="Редактировать"><span class="glyphicon glyphicon-pencil"></span></a>
            </td>
        </tr>
    </tbody>
</table>
<pagination [boundaryLinks]="true" [totalItems]="totalItems" [itemsPerPage]="itemsPerPage" [(ngModel)]="currentPage" previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;" (pageChanged)="pageChanged($event)"></pagination>
</div>

<div bsModal #childModal="bs-modal" [config]="{backdrop: 'static'}" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">{{modalTitle()}}</h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="hideChildModal()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div *ngIf="item">
                    <div class="form-group" *ngFor="let column of columns">
                        <label *ngIf="elemEnabled(column.name)" [attr.for]="column.name">{{column.title}}</label>
                        <input *ngIf="elemEnabled(column.name)" class="form-control" type="text" [id]="column.name" [(ngModel)]="item[column.name]" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger pull-left" *ngIf="!newItem" (click)="delete()"><i class="fa fa-close"></i> Удалить</button>
                    <button type="button" class="btn btn-success" (click)="save()"><i class="fa fa-check"></i> Сохранить</button>
                    <button type="button" class="btn btn-primary" (click)="hideChildModal()"> <i class="fa fa-arrow-circle-left"></i> Закрыть</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="detail-view" *ngIf="onDetailView && item">
    <p>
        <a class="btn btn-warning" (click)="updateItem(item)" title="Редактировать" aria-label="Редактировать"><span class="glyphicon glyphicon-pencil"></span></a>
        <button type="button" class="btn btn-primary pull-right" (click)="closeDetails()"> <i class="fa fa-arrow-circle-left"></i> Назад</button>
    </p>
    <table class="table table-striped table-bordered detail-view">
        <tbody>
            <tr *ngFor="let column of columns">
                <th>{{column.name}}</th>
                <td>{{item[column.name]}}</td>
            </tr>
        </tbody>
    </table>
</div>
